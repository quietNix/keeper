(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{75:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(21),a=n.n(c),o=n(14),s=n(19),i=n(39),u=n(40),l=n(17),d=n(3),j=n(5),b=n.n(j),h="https://keeper-quietnix.herokuapp.com",p="/keeper",f="CHANGE_AUTH_STATUS",O="REQUEST_AUTH_PENDING",g="REQUEST_AUTH_SUCCESS",x="REQUEST_AUTH_FAILED",m="USER_CREATED_STATUS",v=function(e){return{type:f,payload:e}},w=n(1);var y=Object(o.b)((function(e){return{authStatus:e.auth}}),(function(e){return{onAuthSet:function(t){return e(v(t))}}}))((function(e){var t=e.authStatus,n=e.onAuthSet;return Object(w.jsxs)("header",{children:[Object(w.jsx)("h1",{style:{display:"inline-block"},children:"Keeper"}),t&&Object(w.jsx)("button",{onClick:function(){b.a.get(h+"/logout",{withCredentials:!0}).then((function(e){n(!1)})).catch((function(e){console.log(e.response)}))},className:"LogoutButton",children:"Logout"})]})}));var C=function(){var e=(new Date).getFullYear();return Object(w.jsx)("footer",{children:Object(w.jsxs)("p",{children:["Copyright \u24d2 ",e]})})};var S=function(e){return Object(w.jsx)(r.Fragment,{children:Object(w.jsx)("div",{className:"centered",children:Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)("h1",{children:"Note Taking App"}),Object(w.jsx)("p",{className:"lead",children:"Don't take risk keeping a food list in mind."}),Object(w.jsx)("br",{}),Object(w.jsx)("a",{className:"btn btn-light btn-lg",href:"/keeper/register",role:"button",children:"Register"}),Object(w.jsx)("a",{className:"btn btn-dark btn-lg",href:"/keeper/login",role:"button",children:"Login"})]})})})},k=n(7),E=n.n(k),A=n(13),N=n(6),T=n(15),_=n(4);var U=function(e){var t=e.message,n=e.FormSubmit,c=e.setMessage,a=e.route,o=Object(r.useState)({username:"",password:""}),s=Object(N.a)(o,2),i=s[0],u=s[1];function l(e){var t=e.target,n=t.name,r=t.value;u((function(e){return Object(_.a)(Object(_.a)({},e),{},Object(T.a)({},n,r))}))}return Object(w.jsxs)("div",{className:"container-fluid",children:[Object(w.jsx)("br",{}),Object(w.jsx)("div",{className:"row",style:{justifyContent:"center"},children:Object(w.jsxs)("div",{className:"card",children:[Object(w.jsx)("h3",{children:t}),Object(w.jsx)("h1",{children:a}),Object(w.jsxs)("form",{method:"POST",children:[Object(w.jsx)("label",{htmlFor:"email",children:"Email"}),Object(w.jsx)("input",{onChange:l,type:"email",className:"form-control",name:"username",placeholder:"email address",value:i.username}),Object(w.jsx)("br",{}),Object(w.jsx)("label",{htmlFor:"password",children:"Password"}),Object(w.jsx)("input",{onChange:l,type:"password",className:"form-control",name:"password",placeholder:"Password",value:i.password}),Object(w.jsx)("button",{onClick:function(e){e.preventDefault(),console.log(e),""===i.username||""===i.password?c("Please Enter Your Credential"):/^(([^<>()[\]\\.,;:\s@\\"]+(\.[^<>()[\]\\.,;:\s@\\"]+)*)|(\\".+\\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i.username)?/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/.test(i.password)?n({username:i.username,password:i.password}):c("Enter Valid Password"):c("Enter Valid Email address"),u({username:"",password:""})},id:"Submit",className:"btn btn-light  loginButton",children:a})]})]})})]})};var F=Object(o.b)((function(e){return{userCreated:e.userCreated}}),(function(e){return{onUserCreated:function(t){return e(function(e){return{type:m,payload:e}}(t))}}}))((function(e){var t=e.userCreated,n=e.onUserCreated,c=Object(r.useState)(""),a=Object(N.a)(c,2),o=a[0],s=a[1];function i(){return(i=Object(A.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.a.post(h+"/register",t,{withCredentials:!0}).then((function(e){e.data.user?s("User Successfully Created"):s("User Already exist, try logging in"),console.log("if user already existed",e.data),n(e.data.user)})).catch((function(e){console.log(e.response)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return t?(console.log("user created finally",t),Object(w.jsx)(d.a,{to:"/login"})):Object(w.jsx)(U,{route:"Register",message:o,FormSubmit:function(e){return i.apply(this,arguments)},setMessage:s})}));var P=Object(o.b)((function(e){return{authStatus:e.auth,userCreated:e.userCreated}}),(function(e){return{onAuthSet:function(t){return e(v(t))}}}))((function(e){var t=e.authStatus,n=e.onAuthSet,c=e.userCreated,a=Object(r.useState)(""),o=Object(N.a)(a,2),s=o[0],i=o[1];function u(){return(u=Object(A.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("should not reach if wrong email"),e.next=3,b.a.post(h+"/login",t,{withCredentials:!0}).then((function(e){console.log(e),e.data.user?e.data.verified?e.data.auth&&(i(""),n(!0)):i("Verify Your Email Address"):i("User doesn't exist")})).catch((function(e){console.log(e.response),i("Wrong Password, Please Try again")}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){c&&i("Verify Your Email Address")}),[c]),t?Object(w.jsx)(d.a,{to:"/"}):Object(w.jsx)(U,{route:"Login",message:s,FormSubmit:function(e){return u.apply(this,arguments)},setMessage:i})})),D=n(41);var R=function(e){return Object(w.jsxs)("div",{className:"note",children:[Object(w.jsx)("h1",{children:e.title}),Object(w.jsx)("p",{children:e.content}),Object(w.jsx)("button",{id:"Submit",onClick:function(){e.onDelete(e.id)},children:"Del"}),Object(w.jsx)("button",{onClick:function(){e.onOpen(e.id)},children:"Open"})]})};function L(e){console.log("Compose");var t=Object(r.useState)({title:"",content:""}),n=Object(N.a)(t,2),c=n[0],a=n[1];function o(e){var t=e.target,n=t.name,r=t.value;a((function(e){return Object(_.a)(Object(_.a)({},e),{},Object(T.a)({},n,r))}))}function s(){return(s=Object(A.a)(E.a.mark((function t(n){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),""!==c.content||""!==c.title){t.next=3;break}return t.abrupt("return");case 3:return""===c.title&&(c.title=c.content.substring(0,29)),""===c.content&&(c.content=c.title),t.next=7,b.a.post(h+"/compose",c,{withCredentials:!0});case 7:r=t.sent,console.log("Added"),console.log(r.data),e.onAdd(r.data),a({title:"",content:""});case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(w.jsx)(r.Fragment,{children:Object(w.jsx)("div",{className:"Container-fluid",style:{textAlign:"center"},children:Object(w.jsxs)("form",{id:"ComposeForm",style:{position:"relative",left:"auto",width:"40%"},children:[Object(w.jsx)("input",{name:"title",onChange:o,value:c.title,placeholder:"Title"}),Object(w.jsx)("textarea",{name:"content",onChange:o,value:c.content,placeholder:"Take a note...",rows:"3"}),Object(w.jsx)("button",{id:"Submit",onClick:function(e){return s.apply(this,arguments)},children:"Add"})]})})})}var H=Object(r.memo)(L,(function(e,t){return e.show===t.show}));var Y=function(e){console.log("Edit");var t=Object(r.useState)({key:"",title:"",content:""}),n=Object(N.a)(t,2),c=n[0],a=n[1];function o(e){var t=e.target,n=t.name,r=t.value;a((function(e){return Object(_.a)(Object(_.a)({},e),{},Object(T.a)({},n,r))}))}function s(){return(s=Object(A.a)(E.a.mark((function t(n){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),""!==c.content||""!==c.title){t.next=3;break}return t.abrupt("return");case 3:return""===c.title&&(c.title=c.content.substring(0,29)),""===c.content&&(c.content=c.title),t.next=7,b.a.post(h+"/recompose",c,{withCredentials:!0});case 7:r=t.sent,console.log("edited"),console.log(c),console.log(r.data),e.onEdit(r.data.reverse()),a({title:"",content:""}),e.onEditComplete();case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(r.useEffect)((function(){a({key:e.note.key,title:e.note.title,content:e.note.content})}),[e]),Object(w.jsx)(r.Fragment,{children:Object(w.jsxs)("form",{id:"ComposeForm",children:[Object(w.jsx)("input",{name:"title",onChange:o,value:c.title,placeholder:"Title"}),Object(w.jsx)("textarea",{name:"content",onChange:o,value:c.content,placeholder:"Take a note...",rows:"3"}),Object(w.jsx)("button",{id:"Submit",onClick:function(e){return s.apply(this,arguments)},children:"Edit"})]})})};var I=function(e){return Object(w.jsx)("div",{style:{overflowY:"scroll",border:"1px none black",padding:"1%",margin:"1%",height:"400px"},children:e.children})};var V=function(){var e=Object(r.useState)([]),t=Object(N.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),o=Object(N.a)(a,2),s=o[0],i=o[1],u=Object(r.useState)({}),l=Object(N.a)(u,2),d=l[0],j=l[1],p=Object(r.useState)(""),f=Object(N.a)(p,2),O=f[0],g=f[1];function x(){return(x=Object(A.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(h+"/home",{withCredentials:!0}).then((function(e){console.log("Notes"),console.log(e.data),c(e.data.reverse())})).catch((function(e){console.log(e.response)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){var t=n.filter((function(t){return t._id===e}));console.log("delete"),console.log(t[0]),b.a.post(h+"/delete",{postID:t[0]._id},{withCredentials:!0}),c((function(t){return t.filter((function(t){return t._id!==e}))}))}function v(e){var t=n.filter((function(t){return t._id===e})),r={key:t[0]._id,title:t[0].title,content:t[0].content};j(r),i(!0)}console.log("home"),Object(r.useEffect)((function(){!function(){x.apply(this,arguments)}()}),[]);var y=n.filter((function(e){return e.title.toLowerCase().includes(O.toLowerCase())||e.content.toLowerCase().includes(O.toLowerCase())}));return Object(w.jsxs)(r.Fragment,{children:[Object(w.jsx)("div",{style:{textAlign:"center"},children:Object(w.jsx)("input",{style:{width:"70%",height:"2rem",marginTop:"2px",border:"none",borderRadius:"5px",paddingLeft:"10px",boxShadow:"0 2px 5px #ccc"},onChange:function(e){g(e.target.value)},type:"search",placeholder:"Search Notes",value:O})}),s?Object(w.jsx)(Y,{note:d,onEditComplete:function(){i(!1)},onEdit:function(e){c(e)}}):Object(w.jsx)(H,{onAdd:function(e){c((function(t){return[e].concat(Object(D.a)(t))}))}}),Object(w.jsx)(I,{children:""===O?n.map((function(e){return Object(w.jsx)(R,{id:e._id,title:e.title.substring(0,29),content:e.content.length>29?e.content.substring(0,25)+"... ":e.content,onDelete:m,onOpen:v},e._id)})):y.map((function(e){return Object(w.jsx)(R,{id:e._id,title:e.title.substring(0,29),content:e.content.length>29?e.content.substring(0,25)+"... ":e.content,onDelete:m,onOpen:v},e._id)}))})]})};var $=function(){return Object(w.jsx)(r.Fragment,{children:"Loading"})};var q=Object(o.b)((function(e){return{auth:e.auth,isPending:e.isPending,error:e.error}}),(function(e){return{onAuthSet:function(t){return e(v(t))},onRequestAuth:function(){return e((function(e){e({type:O}),b.a.get(h+"/isAuthenticated",{withCredentials:!0}).then((function(t){return e({type:g,payload:t.data.isAuth})})).catch((function(t){return e({type:x,payload:t})}))}))}}}))((function(e){var t=e.auth,n=e.isPending,c=e.error,a=e.onRequestAuth;return Object(r.useEffect)((function(){t||a()}),[t,a]),Object(w.jsxs)(r.Fragment,{children:[Object(w.jsx)(y,{}),Object(w.jsxs)(d.d,{children:[c?Object(w.jsx)("h1",{children:"ERRoR"}):n?Object(w.jsx)(d.b,{exact:!0,path:"/",component:$}):t?Object(w.jsx)(d.b,{exact:!0,path:"/",component:V}):Object(w.jsx)(d.b,{exact:!0,path:"/",component:S}),Object(w.jsx)(d.b,{exact:!0,path:"/register",component:F}),Object(w.jsx)(d.b,{exact:!0,path:"/login",component:P})]}),Object(w.jsx)(C,{})]})})),z={userCreated:!1,isPending:!0,auth:!1,error:""},B=Object(i.createLogger)(),M=Object(s.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case m:return Object(_.a)(Object(_.a)({},e),{},{userCreated:t.payload});case f:return Object(_.a)(Object(_.a)({},e),{},{auth:t.payload});case O:return Object(_.a)(Object(_.a)({},e),{},{isPending:!0});case g:return Object(_.a)(Object(_.a)({},e),{},{auth:t.payload,isPending:!1});case x:return Object(_.a)(Object(_.a)({},e),{},{error:t.payload,isPending:!1});default:return e}}),Object(s.a)(u.a,B));a.a.render(Object(w.jsx)(l.a,{basename:p,children:Object(w.jsx)(o.a,{store:M,children:Object(w.jsx)(q,{})})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.adb05bf6.chunk.js.map